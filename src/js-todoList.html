<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>

        ul {
            padding-left: 0;
        }

        li {
            list-style: none;
        }

        .wrapper {
            margin: 30px auto;
            max-width: 400px;
        }

        .done-true {
            text-decoration: line-through;
            color: grey;
        }
    </style>
</head>
<body>

    <div class="wrapper">
        <h2>Todo</h2>
        <div>
            <span id="result"></span> remaining [<a id="archive" href="#">archive</a>]
        </div>
        <ul id="list">
        </ul>
        <div>
            <input type="text" id="input"/>
            <button id="btn">add</button>
        </div>
    </div>

    <script>

        var data = [
            {text: 'Learn JavaScript', done: true },
            {text: 'Learn AngularJS', done: false }
        ];

        window.onload = function(){

            var list = document.getElementById('list');
            var input = document.getElementById('input');
            var btn = document.getElementById('btn');
            var result = document.getElementById('result');
            var archive = document.getElementById('archive');

            function init(){
                list.innerHTML = "";
                result.innerHTML = remaining() + " of " + data.length;
                data.forEach(function(todo){
                    appendTodo(todo);
                });
            }

            function appendTodo(todo){
                var li = document.createElement('li');
                var input = document.createElement('input');
                input.type = 'checkbox';
                input.checked = todo.done;
                input.onclick = function() {
                    this.checked = this.checked ? true : false;
                    todo.done = this.checked;
                    checked(this);
                    result.innerHTML = remaining() + " of " + data.length;
                };

                var span = document.createElement('span');
                span.innerHTML = todo.text;

                if (todo.done) {
                    span.className = 'done-true';
                }

                li.appendChild(input);
                li.appendChild(span);

                list.appendChild(li);
            }

            function checked(ele) {
                if (ele.checked) {
                    ele.nextElementSibling.classList.add('done-true');
                } else {
                    ele.nextElementSibling.classList.remove('done-true');
                }
            }

            function remaining() {
                var r = data.filter(function(todo){
                    return todo.done == false;
                });

                return r.length;
            }

            init();

            btn.onclick = function(){
                if(input.value) {
                    data.push({text: input.value, done: false});
                    appendTodo(data[data.length - 1]);
                    result.innerHTML = remaining() + " of " + data.length;
                }
            };

            archive.onclick = function () {
                data = data.filter(function(d){
                    return d.done === false;
                });
                init();
            };
        };
    </script>
</body>
</html>